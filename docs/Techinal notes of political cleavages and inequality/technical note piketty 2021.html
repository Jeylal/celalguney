<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Celâl Güney - Notes on the methodology of the WPID</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Celâl Güney</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/Jeylal/myblog/raw/master/Cel%C3%A2l%20G%C3%BCney%20cv%20english.pdf">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:celal.gueney@etu.unige.ch"><i class="bi bi-envelope-fill" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Notes on the methodology of the WPID</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">

</div>
<section id="how-far-can-we-go-with-income-brackets" class="level2">
<h2 class="anchored" data-anchor-id="how-far-can-we-go-with-income-brackets">How far can we go with income brackets?</h2>
<p>To build their database on <a href="https://wpid.world/">World political cleavages and inequality</a>, Piketty and his team had to use electoral survey data. One problem with these sources is that they collect income data through brackets, without reporting the overall income average of the sample or the average per bracket. This Thus poses the question of how far one can go in terms of statistical analysis with only income brackets as a source of information for income. I will here explore what can be done with such a variable as well as the <a href="https://wid.world/document/building-the-world-political-cleavages-and-inequality-database-a-new-dataset-on-electoral-behaviors-in-50-democracies-1948-2020-world-inequality-lab-technical-note-2021-01/">technical note</a> that Piketty et al.&nbsp;(2021) provides to explain how they computed the vote share for income and education decile, which they claim is one of their main contributions on political cleavages and inequality.</p>
<section id="a-first-look-on-the-wpid-dataset" class="level3">
<h3 class="anchored" data-anchor-id="a-first-look-on-the-wpid-dataset">A first look on the WPID dataset</h3>
<p>The wpid is based on an impressive <a href="https://wpid.world/resources/en/zip/wpid-micro.zip">dataset</a> compiling electoral survey data of 500 elections since 1948. Since the technical note takes Canada’s 2015 election as an example, I will use the latter here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ca <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"ca.dta"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>ca2015 <span class="ot">&lt;-</span> ca <span class="sc">%&gt;%</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(ca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that there is already something weird here: in the dataset, the variable income has 20 brackets/categories here whereas it has 18 in the technical note. Since this is not so much of an issue, I will still work with this dataset and we just won’t have the same results as in Piketty &amp; al’s example.</p>
<p>A first step in analyzing such a variable is to compute the frequency, relative frequency and the cumulative frequencies. Note that I only take the individuals who vote the the New Democratic Party (NDP) as in the technical note’s example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ca2015 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(votendp <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(inc) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum.n =</span> <span class="fu">cumsum</span>(n),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumrelfreqN =</span> <span class="fu">cumsum</span>(prop),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumrelfreqInc =</span> <span class="fu">cumsum</span>(inc<span class="sc">/</span><span class="fu">sum</span>(inc))) <span class="ot">-&gt;</span> table.income</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>table.income <span class="sc">%&gt;%</span> </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">caption =</span> <span class="st">"Distribution of income groups"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="ohaqmhhuni" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ohaqmhhuni) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#ohaqmhhuni) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ohaqmhhuni) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ohaqmhhuni) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ohaqmhhuni) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ohaqmhhuni) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ohaqmhhuni) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ohaqmhhuni) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ohaqmhhuni) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#ohaqmhhuni) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ohaqmhhuni) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ohaqmhhuni) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ohaqmhhuni) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ohaqmhhuni) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ohaqmhhuni) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ohaqmhhuni) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ohaqmhhuni) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ohaqmhhuni) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ohaqmhhuni) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ohaqmhhuni) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ohaqmhhuni) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ohaqmhhuni) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ohaqmhhuni) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ohaqmhhuni) .gt_left {
  text-align: left;
}

:where(#ohaqmhhuni) .gt_center {
  text-align: center;
}

:where(#ohaqmhhuni) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ohaqmhhuni) .gt_font_normal {
  font-weight: normal;
}

:where(#ohaqmhhuni) .gt_font_bold {
  font-weight: bold;
}

:where(#ohaqmhhuni) .gt_font_italic {
  font-style: italic;
}

:where(#ohaqmhhuni) .gt_super {
  font-size: 65%;
}

:where(#ohaqmhhuni) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ohaqmhhuni) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ohaqmhhuni) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ohaqmhhuni) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ohaqmhhuni) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ohaqmhhuni) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ohaqmhhuni) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <caption>Distribution of income groups</caption>
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="inc">inc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="cum.n">cum.n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="prop">prop</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="cumrelfreqN">cumrelfreqN</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="cumrelfreqInc">cumrelfreqInc</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="inc" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">53</td>
<td headers="cum.n" class="gt_row gt_right">53</td>
<td headers="prop" class="gt_row gt_right">0.07230559</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.07230559</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.004975124</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">2</td>
<td headers="n" class="gt_row gt_right">56</td>
<td headers="cum.n" class="gt_row gt_right">109</td>
<td headers="prop" class="gt_row gt_right">0.07639836</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.14870396</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.014925373</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">3</td>
<td headers="n" class="gt_row gt_right">15</td>
<td headers="cum.n" class="gt_row gt_right">124</td>
<td headers="prop" class="gt_row gt_right">0.02046385</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.16916780</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.029850746</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">4</td>
<td headers="n" class="gt_row gt_right">35</td>
<td headers="cum.n" class="gt_row gt_right">159</td>
<td headers="prop" class="gt_row gt_right">0.04774898</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.21691678</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.049751244</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">5</td>
<td headers="n" class="gt_row gt_right">53</td>
<td headers="cum.n" class="gt_row gt_right">212</td>
<td headers="prop" class="gt_row gt_right">0.07230559</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.28922237</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.074626866</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">6</td>
<td headers="n" class="gt_row gt_right">47</td>
<td headers="cum.n" class="gt_row gt_right">259</td>
<td headers="prop" class="gt_row gt_right">0.06412005</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.35334243</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.104477612</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">7</td>
<td headers="n" class="gt_row gt_right">44</td>
<td headers="cum.n" class="gt_row gt_right">303</td>
<td headers="prop" class="gt_row gt_right">0.06002729</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.41336971</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.139303483</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">8</td>
<td headers="n" class="gt_row gt_right">71</td>
<td headers="cum.n" class="gt_row gt_right">374</td>
<td headers="prop" class="gt_row gt_right">0.09686221</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.51023192</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.179104478</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">10</td>
<td headers="n" class="gt_row gt_right">34</td>
<td headers="cum.n" class="gt_row gt_right">408</td>
<td headers="prop" class="gt_row gt_right">0.04638472</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.55661664</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.228855721</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">11</td>
<td headers="n" class="gt_row gt_right">35</td>
<td headers="cum.n" class="gt_row gt_right">443</td>
<td headers="prop" class="gt_row gt_right">0.04774898</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.60436562</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.283582090</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">12</td>
<td headers="n" class="gt_row gt_right">50</td>
<td headers="cum.n" class="gt_row gt_right">493</td>
<td headers="prop" class="gt_row gt_right">0.06821282</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.67257844</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.343283582</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">13</td>
<td headers="n" class="gt_row gt_right">28</td>
<td headers="cum.n" class="gt_row gt_right">521</td>
<td headers="prop" class="gt_row gt_right">0.03819918</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.71077763</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.407960199</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">14</td>
<td headers="n" class="gt_row gt_right">56</td>
<td headers="cum.n" class="gt_row gt_right">577</td>
<td headers="prop" class="gt_row gt_right">0.07639836</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.78717599</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.477611940</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">15</td>
<td headers="n" class="gt_row gt_right">19</td>
<td headers="cum.n" class="gt_row gt_right">596</td>
<td headers="prop" class="gt_row gt_right">0.02592087</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.81309686</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.552238806</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">16</td>
<td headers="n" class="gt_row gt_right">26</td>
<td headers="cum.n" class="gt_row gt_right">622</td>
<td headers="prop" class="gt_row gt_right">0.03547067</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.84856753</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.631840796</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">17</td>
<td headers="n" class="gt_row gt_right">35</td>
<td headers="cum.n" class="gt_row gt_right">657</td>
<td headers="prop" class="gt_row gt_right">0.04774898</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.89631651</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.716417910</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">18</td>
<td headers="n" class="gt_row gt_right">23</td>
<td headers="cum.n" class="gt_row gt_right">680</td>
<td headers="prop" class="gt_row gt_right">0.03137790</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.92769441</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.805970149</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">19</td>
<td headers="n" class="gt_row gt_right">32</td>
<td headers="cum.n" class="gt_row gt_right">712</td>
<td headers="prop" class="gt_row gt_right">0.04365621</td>
<td headers="cumrelfreqN" class="gt_row gt_right">0.97135061</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">0.900497512</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">20</td>
<td headers="n" class="gt_row gt_right">21</td>
<td headers="cum.n" class="gt_row gt_right">733</td>
<td headers="prop" class="gt_row gt_right">0.02864939</td>
<td headers="cumrelfreqN" class="gt_row gt_right">1.00000000</td>
<td headers="cumrelfreqInc" class="gt_row gt_right">1.000000000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We can then plot income groups against their proportion</p>
<div class="cell fig-cap-location-top">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>table.income <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(inc), <span class="at">y =</span> prop)<span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Income group"</span>) <span class="ot">-&gt;</span> income.group.plot</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>income.group.plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="technical-note-piketty-2021_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Distribution of Income groups: Canadian 2015 election survey</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>If we plot the income group against the relative cumulative frequency, we obtain the cumulative distribution of income groups. The cumulative distribution can also be directly plotted with plot(ecdf()):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>table.income <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(inc), <span class="at">y =</span> cumrelfreqN)<span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Income group"</span>)<span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative distribution of Income group: 2015 Canadian election survey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="technical-note-piketty-2021_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we plot this relative cumulative distribution of observation against the one for income, we get the Lorenz curve:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>table.income <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> cumrelfreqN, <span class="at">y =</span> cumrelfreqInc)<span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="st">"Lorenz curve"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="technical-note-piketty-2021_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>What makes Piketty’s team approach special and interesting is their systematic analysis in terms of quantile groups. This is, according to them, their main contribution and this approach has the advantage to allow for systematic comparison accross space and time. We will try to reproduce here their conversion of income group into quantiles.</p>
<p>In R, the decile for each observation can be added to the dataset with the function ntile():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ca2015 <span class="ot">&lt;-</span> ca2015 <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">decile =</span> <span class="fu">ntile</span>(inc, <span class="dv">10</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, the last column of ca2015 is the decile for each observation in the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ca2015 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(votendp <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decile) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(votendp) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumsumprop =</span> <span class="fu">cumsum</span>(prop)) <span class="ot">-&gt;</span> table.income.vote</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>table.income.vote <span class="sc">%&gt;%</span> <span class="fu">gt</span>(<span class="at">caption =</span> <span class="st">"Proportion of vote for the NDP per income decile"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="ivzyxovhuw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ivzyxovhuw) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#ivzyxovhuw) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ivzyxovhuw) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ivzyxovhuw) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ivzyxovhuw) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ivzyxovhuw) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ivzyxovhuw) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ivzyxovhuw) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ivzyxovhuw) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#ivzyxovhuw) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ivzyxovhuw) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ivzyxovhuw) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ivzyxovhuw) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ivzyxovhuw) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ivzyxovhuw) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ivzyxovhuw) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ivzyxovhuw) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ivzyxovhuw) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ivzyxovhuw) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ivzyxovhuw) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ivzyxovhuw) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ivzyxovhuw) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ivzyxovhuw) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ivzyxovhuw) .gt_left {
  text-align: left;
}

:where(#ivzyxovhuw) .gt_center {
  text-align: center;
}

:where(#ivzyxovhuw) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ivzyxovhuw) .gt_font_normal {
  font-weight: normal;
}

:where(#ivzyxovhuw) .gt_font_bold {
  font-weight: bold;
}

:where(#ivzyxovhuw) .gt_font_italic {
  font-style: italic;
}

:where(#ivzyxovhuw) .gt_super {
  font-size: 65%;
}

:where(#ivzyxovhuw) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ivzyxovhuw) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ivzyxovhuw) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ivzyxovhuw) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ivzyxovhuw) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ivzyxovhuw) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ivzyxovhuw) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <caption>Proportion of vote for the NDP per income decile</caption>
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decile">decile</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="votendp">votendp</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="prop">prop</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="cumsumprop">cumsumprop</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="decile" class="gt_row gt_right">1</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">76</td>
<td headers="prop" class="gt_row gt_right">0.10368349</td>
<td headers="cumsumprop" class="gt_row gt_right">0.1036835</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">2</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">70</td>
<td headers="prop" class="gt_row gt_right">0.09549795</td>
<td headers="cumsumprop" class="gt_row gt_right">0.1991814</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">3</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">106</td>
<td headers="prop" class="gt_row gt_right">0.14461119</td>
<td headers="cumsumprop" class="gt_row gt_right">0.3437926</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">4</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">81</td>
<td headers="prop" class="gt_row gt_right">0.11050477</td>
<td headers="cumsumprop" class="gt_row gt_right">0.4542974</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">5</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">57</td>
<td headers="prop" class="gt_row gt_right">0.07776262</td>
<td headers="cumsumprop" class="gt_row gt_right">0.5320600</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">6</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">88</td>
<td headers="prop" class="gt_row gt_right">0.12005457</td>
<td headers="cumsumprop" class="gt_row gt_right">0.6521146</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">7</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">70</td>
<td headers="prop" class="gt_row gt_right">0.09549795</td>
<td headers="cumsumprop" class="gt_row gt_right">0.7476126</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">8</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">67</td>
<td headers="prop" class="gt_row gt_right">0.09140518</td>
<td headers="cumsumprop" class="gt_row gt_right">0.8390177</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">9</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">63</td>
<td headers="prop" class="gt_row gt_right">0.08594816</td>
<td headers="cumsumprop" class="gt_row gt_right">0.9249659</td></tr>
    <tr><td headers="decile" class="gt_row gt_right">10</td>
<td headers="votendp" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">55</td>
<td headers="prop" class="gt_row gt_right">0.07503411</td>
<td headers="cumsumprop" class="gt_row gt_right">1.0000000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell fig-cap-location-top">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>table.income.vote <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(decile), <span class="at">y =</span> prop)<span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"decile"</span>) <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">""</span>)<span class="ot">-&gt;</span> decile.plot</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(income.group.plot, decile.plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="technical-note-piketty-2021_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Proportion of NDP voters per income groups (left) and decile (right)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ca2015 <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(inc) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumrelfreq =</span> <span class="fu">cumsum</span>(prop),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">inverse_cdf =</span> <span class="fu">rev</span>(cumrelfreq)) <span class="ot">-&gt;</span> paretotable</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>paretotable <span class="sc">%&gt;%</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="ssihqxeyxk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ssihqxeyxk) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#ssihqxeyxk) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ssihqxeyxk) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ssihqxeyxk) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ssihqxeyxk) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ssihqxeyxk) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ssihqxeyxk) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ssihqxeyxk) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ssihqxeyxk) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#ssihqxeyxk) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ssihqxeyxk) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ssihqxeyxk) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ssihqxeyxk) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ssihqxeyxk) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ssihqxeyxk) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ssihqxeyxk) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ssihqxeyxk) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ssihqxeyxk) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ssihqxeyxk) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ssihqxeyxk) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ssihqxeyxk) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ssihqxeyxk) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ssihqxeyxk) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ssihqxeyxk) .gt_left {
  text-align: left;
}

:where(#ssihqxeyxk) .gt_center {
  text-align: center;
}

:where(#ssihqxeyxk) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ssihqxeyxk) .gt_font_normal {
  font-weight: normal;
}

:where(#ssihqxeyxk) .gt_font_bold {
  font-weight: bold;
}

:where(#ssihqxeyxk) .gt_font_italic {
  font-style: italic;
}

:where(#ssihqxeyxk) .gt_super {
  font-size: 65%;
}

:where(#ssihqxeyxk) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ssihqxeyxk) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ssihqxeyxk) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ssihqxeyxk) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ssihqxeyxk) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ssihqxeyxk) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ssihqxeyxk) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="inc">inc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="prop">prop</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="cumrelfreq">cumrelfreq</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="inverse_cdf">inverse_cdf</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="inc" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">211</td>
<td headers="prop" class="gt_row gt_right">0.04687847</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.04687847</td>
<td headers="inverse_cdf" class="gt_row gt_right">1.00000000</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">2</td>
<td headers="n" class="gt_row gt_right">327</td>
<td headers="prop" class="gt_row gt_right">0.07265052</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.11952899</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.87136192</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">3</td>
<td headers="n" class="gt_row gt_right">79</td>
<td headers="prop" class="gt_row gt_right">0.01755166</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.13708065</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.82914908</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">4</td>
<td headers="n" class="gt_row gt_right">210</td>
<td headers="prop" class="gt_row gt_right">0.04665630</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.18373695</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.78626972</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">5</td>
<td headers="n" class="gt_row gt_right">199</td>
<td headers="prop" class="gt_row gt_right">0.04421240</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.22794934</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.75960898</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">6</td>
<td headers="n" class="gt_row gt_right">184</td>
<td headers="prop" class="gt_row gt_right">0.04087980</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.26882915</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.70451011</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">7</td>
<td headers="n" class="gt_row gt_right">188</td>
<td headers="prop" class="gt_row gt_right">0.04176850</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.31059764</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.66985114</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">8</td>
<td headers="n" class="gt_row gt_right">421</td>
<td headers="prop" class="gt_row gt_right">0.09353477</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.40413242</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.64185737</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">10</td>
<td headers="n" class="gt_row gt_right">205</td>
<td headers="prop" class="gt_row gt_right">0.04554543</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.44967785</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.57209509</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">11</td>
<td headers="n" class="gt_row gt_right">166</td>
<td headers="prop" class="gt_row gt_right">0.03688069</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.48655854</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.53921351</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">12</td>
<td headers="n" class="gt_row gt_right">237</td>
<td headers="prop" class="gt_row gt_right">0.05265497</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.53921351</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.48655854</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">13</td>
<td headers="n" class="gt_row gt_right">148</td>
<td headers="prop" class="gt_row gt_right">0.03288158</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.57209509</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.44967785</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">14</td>
<td headers="n" class="gt_row gt_right">314</td>
<td headers="prop" class="gt_row gt_right">0.06976228</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.64185737</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.40413242</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">15</td>
<td headers="n" class="gt_row gt_right">126</td>
<td headers="prop" class="gt_row gt_right">0.02799378</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.66985114</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.31059764</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">16</td>
<td headers="n" class="gt_row gt_right">156</td>
<td headers="prop" class="gt_row gt_right">0.03465896</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.70451011</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.26882915</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">17</td>
<td headers="n" class="gt_row gt_right">248</td>
<td headers="prop" class="gt_row gt_right">0.05509887</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.75960898</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.22794934</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">18</td>
<td headers="n" class="gt_row gt_right">120</td>
<td headers="prop" class="gt_row gt_right">0.02666074</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.78626972</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.18373695</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">19</td>
<td headers="n" class="gt_row gt_right">193</td>
<td headers="prop" class="gt_row gt_right">0.04287936</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.82914908</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.13708065</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">20</td>
<td headers="n" class="gt_row gt_right">190</td>
<td headers="prop" class="gt_row gt_right">0.04221284</td>
<td headers="cumrelfreq" class="gt_row gt_right">0.87136192</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.11952899</td></tr>
    <tr><td headers="inc" class="gt_row gt_right">NA</td>
<td headers="n" class="gt_row gt_right">579</td>
<td headers="prop" class="gt_row gt_right">0.12863808</td>
<td headers="cumrelfreq" class="gt_row gt_right">1.00000000</td>
<td headers="inverse_cdf" class="gt_row gt_right">0.04687847</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>paretotable <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(inc), <span class="at">y =</span> <span class="fu">log</span>(<span class="fu">rev</span>(cumrelfreq)))<span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)<span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="technical-note-piketty-2021_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>